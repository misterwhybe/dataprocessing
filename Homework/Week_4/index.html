<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
      <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
        <style type = "text/css">
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }
            path.domain{
                stroke: none;
            }
            .y .tick line{
                stroke: rgb(221, 221, 221);
                
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
        </style>
  </head>
  <body>
      <div id = "chart"></div>
    <!-- This is where your bar chart will go -->
    <script type="text/javascript">
        d3.select("body")
            .append("p").text("Renewable energy of Australia")
            .append("p").text("By: Wiebe Jelsma (12468223)")
            .append("p").text("This dataset is found \
                    on OECT, and it is about the \
                    Renewable energy of Australia.");

        var Dates = []
        var Values = []
        d3.json("data.json").then(function(data){
            for(i = 0; i < 57; i++){
                Dates.push(Object.values(data)[0][i])
                Values.push(Object.values(data)[1][i])
            }            

            margin = {top: 0, right: 0, bottom: 40, left: 20}
            var height = 650 - margin.bottom;
            var width = 1250 - margin.left;
            var barWidth = 15;
            var barOffset = 15;
            var barPadding = 5;

            var xScale = d3.scaleLinear()
                                .domain([1960, d3.max(Dates, function (d) {
                                return d;})])
                                .range([margin.left, width - margin.left]);
            var yScale = d3.scaleLinear()
                                .domain([0, d3.max(Values, function (d) {
                    return d;})])
                                .range([margin.bottom, height - margin.bottom]); 

           var xAxis = d3.axisBottom(xScale).tickFormat(function (d) {
                return d.x;});
                                                       
            var yAxis = d3.axisLeft(yScale);


            var svg = d3.select("body")

                .append("svg")
                .attr("width", width + margin.left)
                .attr("height", height + margin.bottom)
                .style("background", "lightyellow")
                .append("g")
                .selectAll("rect")
                    .data(Values)
                    .enter()
                    .append("rect")
                        .style("fill", "lightgreen")
                        .attr("width", barWidth)
                        .attr("height", function(d){
                            return yScale(d);
                        })

                        .attr("x", function(d, i) {
                            return margin.left + i * (width / Dates.length);
                        })
                        .attr("y", function(d){
                            return height - yScale(d)
                        })
                        .attr("width", width / Dates.length)
                        .attr("height", function(d){
                            return yScale(d)
                        })
            svg.append("g")
                .attr("class", "axis") 
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);
            svg.append("g")
                .attr("class", "y axis")
                .attr("transform", "translate("+[margin.left, 5]+")")
                .call(yAxis)
            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .style("text-anchor", "end")
                .text("Renewable Energy");
            
        });

    </script>
  </body>
</html>