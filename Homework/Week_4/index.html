<!DOCTYPE html>
<html>
  <head>
        <meta charset="utf-8">
        <title>Renewable Energy</title>
        <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
        <style type = "text/css">
            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }
            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }
        </style>
  </head>
  <body>
      <div id = "bar"></div>
    <!-- This is where your bar chart will go -->
    <script type="text/javascript">
        d3.select("body")
            .append("p").text("Renewable energy of Australia")
            .append("p").text("By: Wiebe Jelsma (12468223)")
            .append("p").text("This dataset is found \
                    on OECT, and it is about the \
                    Renewable energy of Australia.");

        var Dates = []
        var Values = []
        d3.json("data.json").then(function(data){
            for(i = 0; i < 57; i++){
                Dates.push(Object.values(data)[0][i])
                Values.push(Object.values(data)[1][i])
            }            

            margin = {top: 5, right: 10, bottom: 40, left: 60}
            var height = 650 - margin.top - margin.bottom;
            var width = 1250 - margin.left - margin.right;
            var barWidth = 15;

            var xScale = d3.scaleLinear()
                .domain([1960, d3.max(Dates, function (d) {
                    return d;})])
                .range([margin.left, width - margin.left - margin.right]);
            var yScale = d3.scaleLinear()
                .domain([0, d3.max(Values, function (d) {
                    return d;})])
                .range([height - margin.bottom ,margin.bottom]);

            var xAxis = d3.axisBottom(xScale)                                          
            var yAxis = d3.axisLeft(yScale);

            var svg = d3.select("body")
                .append("svg")
                .attr("width", width + margin.left)
                .attr("height", height + margin.bottom)
                .style("background", "lightyellow")
                .append("g")
            svg.selectAll("rect")
                .data(Values)
                .enter()
                .append("rect")
                .style("fill", "lightgreen")
                .attr("width", barWidth)
                .attr("height", function(d){
                    return yScale(d);
                })

                .attr("x", function(d, i) {
                    return margin.left + i * (width / Dates.length);
                })
                .attr("y", function(d){
                    return yScale(d)
                })
                .attr("width", width / Dates.length)
                .attr("height", function(d){
                    return height - yScale(d) 
                })
            // try to make x-axis
            svg.append("g")
                .attr("class", "axis") 
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);
            // try to make y-axis
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate("+[margin.left, margin.bottom]+")")
                .call(yAxis)
            // try to name the y-axis, was still working on it
            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", margin.bottom)
                .style("text-anchor", "end")
                .text("Renewable Energy");
        });
    </script>
  </body>
</html>